<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">


       <p:dialog id="ProfileDlg" widgetVar="ProfileDialog" responsive="true" modal="true" resizable="false" draggable="false" width="500" header="Usuário Logado">
            <h:form id="ProfileForm">
            	<div class="ui-fluid">
            	<p:messages showDetail="true" closable="true"/>
            	<div class="panel panel-success">
					 <div class="panel-heading"><strong>Informações Gerais</strong></div>
		                <p:panelGrid columnClasses="column" styleClass="ui-panelgrid-blank"  columns="2" layout="grid">
		                    
		                    <h:outputText value="Nome:"/>
		                    <h:outputText value="#{contaBean.usuario.name}"/>
		                    
		                    <h:outputText value="Nome de usuário:"/>
		                    <h:outputText value=" #{contaBean.conta.userName}"/>
		                    
							<h:outputText value="E-mail:"/>
		                    <h:outputText id="mailLabel" value=" #{contaBean.conta.mail}"/>
		
		                    <h:outputText value="Função:"/>
		                    <h:outputText value=" #{contaBean.conta.userRole.role}"/>
		
		                    <h:outputText value="Último Acesso :"/>
		                    <h:outputText value=" #{contaBean.lastAccess}"/>
		                    
		                    <h:outputText value="Data Registro :"/>
		                    <h:outputText value="#{contaBean.usuario.dateRegister}">
								<f:convertDateTime pattern="dd/MM/yyyy" />
		                    </h:outputText>
		                </p:panelGrid>
		        </div>
		        <div class="panel panel-success">
					 <div class="panel-heading"><strong>Alteração de dados de acesso</strong></div>
						<p:panelGrid columnClasses="column" styleClass="ui-panelgrid-blank"  columns="2" layout="grid">
							<p:outputLabel for="mail" value="E-mail:" />
							<p:inputText id="mail" value="#{contaEditBean.conta.mail}"/>	
							
							<p:outputLabel for="currentPassword" value="Senha Atual:" />
							<p:password id="currentPassword" required="true" value="#{contaEditBean.oldAcount.password}" />
							
							<p:outputLabel for="newPassword" value="Nova Senha:" />
							<p:password id="newPassword" required="true" value="#{contaEditBean.newPassword}" feedback="true"
										promptLabel=" " weakLabel="Fácil" goodLabel="Média" strongLabel="Díficil" inline="true" />

							<p:outputLabel for="repPassword" value="Repita a nova senha:" />
							<p:password id="repPassword" required="true" value="#{contaEditBean.repeatPassword}"/>
						</p:panelGrid>
						<div class="box-footer">
							<h:panelGrid columns="3">
								<p:commandButton id="changeAcess" icon="fa fa-floppy-o" action="#{contaEditBean.updateAcountLogged()}" process="@this mail currentPassword newPassword mailLabel repPassword" update="ProfileForm" value="Alterar" styleClass="btnn btnn-default">
									<p:tooltip  for="changeAcess" value="Após alterar seus dados, você irá automaticamente fazer logout." />
									<p:resetInput target="ProfileForm" />
								</p:commandButton>
							</h:panelGrid>
						</div>
				</div>
				</div>
            </h:form>
        </p:dialog>

</ui:composition>